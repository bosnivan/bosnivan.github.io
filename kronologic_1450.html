<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kronologic: Cuzco 1450</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Georgia", serif;
        }

        body {
            background-color: #f8f3ea;
            color: #2f4f4f;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #9b8756;
        }

        h1 {
            color: #6c8b5f;
            font-size: 2.5rem;
            margin-bottom: 10px;
            line-height: normal;
        }

        h2 {
            color: #6c8b5f;
            margin-bottom: 10px;
            line-height: normal;
        }

        h3 {
            color: #9b8756;
            margin: 20px 0 10px;
        }

        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .btn {
            background-color: #b59b63;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #9b8756;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .btn-group .btn {
            text-align: center;
            min-width: 200px;
            box-sizing: border-box;
            flex: 1;
        }

        #submit-investigation {
            width: 100%;
            margin-top: 10px;
        }

        #back-to-scenarios {
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .info-box {
            background-color: #fdf9f4;
            border-left: 4px solid #b59b63;
            padding: 15px;
            margin: 15px 0;
        }

        .investigation-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .investigation-area .btn-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .investigation-area .btn-group button {
            flex: none;
        }

        .investigation-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: start;
            margin: 15px 0;
            max-width: fit-content;
        }

        .investigation-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .investigation-row label {
            width: 80px;
        }

        .investigation-row select {
            flex: 1;
            padding: 8px;
            border: 1px solid #b59b63;
            border-radius: 4px;
            font-size: 1rem;
            min-width: 190px;
            max-width: 190px;
        }

        @media (max-width: 350px) {
            .investigation-form {
                gap: 20px;
            }

            .investigation-row {
                flex-direction: column;
                align-items: stretch;
                gap: 5px;
            }

            .investigation-row label {
                width: auto;
                line-height: normal;
            }

            .investigation-row select {
                width: 100%;
            }
        }

        #time-investigation {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #time-investigation.hidden {
            display: none;
        }

        @media (max-width: 350px) {
            #time-investigation .investigation-row:nth-of-type(2) label {
                margin-top: 10px;
            }
        }

        .investigation-history {
            background-color: #fdf9f4;
            border: 1px solid #9b8756;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .investigation-options #character-select {
            margin-top: 10px;
        }

        @media (max-width: 350px) {
            .investigation-options #character-select {
                margin-top: 0px;
            }

            #character-investigation .investigation-row:nth-of-type(2) label {
                margin-top: 20px;
            }
        }

        .history-toggle {
            background: none;
            border: none;
            color: #b59b63;
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
        }

        .history-entry {
            padding: 8px;
            border-bottom: 1px solid #e0d6c2;
            margin-bottom: 5px;
        }

        .history-entry:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .history-investigation {
            font-weight: bold;
            color: #6c8b5f;
        }

        .history-result {
            margin-left: 10px;
        }
    </style>
</head>

<body>
    <header>
        <h1>Kronologic: Cuzco 1450</h1>
    </header>

    <div class="container">
        <!-- Scenario Selection -->
        <div id="scenario-selection" class="card">
            <h2>Select a Scenario</h2>
            <div class="btn-group" id="scenario-buttons"></div>
        </div>

        <!-- Scenario Description -->
        <div id="scenario-description" class="card hidden">
            <h2 id="scenario-title"></h2>
            <div class="info-box" id="scenario-desc"></div>
            <div class="info-box" id="scenario-mystery"></div>
            <div class="info-box" id="scenario-clarifications"></div>
            <h3>Select an Investigation</h3>
            <div class="btn-group" id="investigation-buttons"></div>
            <button id="back-to-scenarios" class="btn">Back to Scenarios</button>
        </div>

        <!-- Investigation Area -->
        <div id="investigation-area" class="card hidden">
            <h2 id="investigation-title"></h2>
            <div id="investigation-goal"></div>
            <div class="info-box" id="investigation-setup"></div>
            <div class="investigation-area">
                <div class="investigation-form">
                    <div class="investigation-row">
                        <label for="investigation-type">Investigate:</label>
                        <select id="investigation-type">
                            <option value="time">Location + Time</option>
                            <option value="character">Location + Character</option>
                        </select>
                    </div>

                    <div id="time-investigation" class="investigation-options">
                        <div class="investigation-row">
                            <label for="time-location">Location:</label>
                            <select id="time-location">
                                <option value="SM">Salt Mines</option>
                                <option value="MP">Machu Picchu</option>
                                <option value="CU">Cuzco</option>
                                <option value="TE">Terraces</option>
                                <option value="OB">Observatory</option>
                                <option value="FO">Fortress</option>
                            </select>
                        </div>

                        <div class="investigation-row">
                            <label for="time-select">Time:</label>
                            <select id="time-select">
                                <option value="1">Time 1</option>
                                <option value="2">Time 2</option>
                                <option value="3">Time 3</option>
                                <option value="4">Time 4</option>
                                <option value="5">Time 5</option>
                                <option value="6">Time 6</option>
                            </select>
                        </div>
                    </div>

                    <div id="character-investigation" class="investigation-options hidden">
                        <div class="investigation-row">
                            <label for="character-location">Location:</label>
                            <select id="character-location">
                                <option value="SM">Salt Mines</option>
                                <option value="MP">Machu Picchu</option>
                                <option value="CU">Cuzco</option>
                                <option value="TE">Terraces</option>
                                <option value="OB">Observatory</option>
                                <option value="FO">Fortress</option>
                            </select>
                        </div>

                        <div class="investigation-row">
                            <label for="character-select">Character:</label>
                            <select id="character-select">
                                <option value="A">The Artisan</option>
                                <option value="E">The Educator</option>
                                <option value="F">The Farmer</option>
                                <option value="M">The Merchant</option>
                                <option value="P">The Priestess</option>
                                <option value="S">The Soldier</option>
                            </select>
                        </div>
                    </div>

                    <button id="submit-investigation" class="btn">
                        Submit Investigation
                    </button>
                </div>
                <div id="investigation-result" class="info-box hidden">
                    <h3 id="investigation-name"></h3>
                    <p id="shared-info"></p>
                    <p id="private-info"></p>
                </div>

                <!-- Investigation History -->
                <div class="investigation-history">
                    <h3>
                        History (<span id="score">0</span>)
                        <button id="toggle-history" class="history-toggle">Hide</button>
                    </h3>
                    <div id="history-entries"></div>
                </div>
                <div class="btn-group">
                    <button id="end-investigation" class="btn">
                        End Investigation
                    </button>
                    <button id="back-to-investigations" class="btn">
                        Back to Investigations
                    </button>
                </div>
            </div>
        </div>

        <!-- End Investigation -->
        <div id="end-investigation-screen" class="card hidden">
            <h2>Investigation Complete</h2>
            <h3>Solution:</h3>
            <div class="info-box">
                <p id="solution-text"></p>
            </div>
            <p>Congratulations, if you deduced it correctly.</p>
            <div id="rank-display"></div>
            <div class="btn-group">
                <button id="new-investigation" class="btn">New Investigation</button>
                <button id="back-to-scenarios-end" class="btn">
                    Back to Scenarios
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game data
        const scenarios = [
            {
                "title": "Scenario I - The Golden Scepter",
                "description": "At the dawn of a forgotten time, the Sun God appointed two disciples and entrusted them with a powerful and mysterious golden scepter. They crossed valleys and mountains, searching for the place where the scepter would sink into the earth. There, the place would be blessed, and a prosperous city would rise for the Incas. But no one knew where the scepter would find its home... Across all six Time periods, there is only one Location that is visited by exactly two Characters.",
                "mystery": "What is the sacred Location chosen by the Sun God? Who are the two Characters tasked with this mission? In which Time period did they meet in this Place?",
                "clarifications": "In this scenario, you use all the Time tiles as well as all the Character tiles. The Characters must move at each Time and always to an adjacent Location. They therefore never remain in the same Location for two consecutive Time periods. For each investigation, some paths are blocked and therefore cannot be taken. Paths marked with an arrow are only accessible in the direction indicated (remember to note this information on your note sheet!). All the Characters are present in each of the Time periods.",
                "investigations": [
                    {
                        "title": "Investigation 1",
                        "level": "***",
                        "setup": "Paths) Cuzco X Observatory, Cuzco X Terraces, Cuzco X Fortress; Time 1) The Artisan at Cuzco, The Educator at Terraces, The Farmer at Observatory, The Merchant at Machu Picchu, The Priestess at Fortress, The Soldier at Salt Mines",
                        "solution": "Where: Observatory - Who: The Educator and The Farmer - When: Time 3",
                        "score": [8, 14],
                        "locations": {
                            "SM": ["A", "+", "x2", "x1", "+", "x2", "+", "x1", "x2", "+", "3", "x1", "M", "x1", "x0", "x2", "5", "5", "P", "S", "2", "x0", "x0", "x2"],
                            "MP": ["S", "+", "x2", "x1", "+", "x3", "P", "x1", "x0", "+", "4", "x0", "+", "x1", "x0", "x0", "4", "2", "M", "+", "+", "x3", "x0", "x1"],
                            "CU": ["M", "+", "x2", "x1", "+", "x1", "+", "x1", "x1", "+", "5", "x1", "S", "x1", "x0", "x1", "2", "3", "S", "P", "+", "x0", "x0", "x1"],
                            "TE": ["P", "5", "x0", "x0", "+", "x0", "+", "x1", "x2", "+", "2", "x2", "A", "x1", "x2", "x1", "+", "+", "+", "E", "3", "x0", "x0", "x1"],
                            "OB": ["+", "3", "x0", "x0", "+", "x0", "+", "x1", "x1", "3", "+", "x0", "F", "x0", "x1", "x2", "+", "+", "+", "F", "+", "x0", "x3", "x0"],
                            "FO": ["F", "2", "x0", "x3", "+", "x0", "F", "x1", "x0", "6", "+", "x2", "+", "x2", "x3", "x0", "+", "+", "F", "+", "4", "x3", "x3", "x1"]
                        }
                    },
                    {
                        "title": "Investigation 2",
                        "level": "***",
                        "setup": "Paths) Machu Picchu X Cuzco, Cuzco X Fortress, Salt Mines X Terraces; Time 1) The Artisan at Cuzco, The Educator at Terraces, The Farmer at Observatory, The Merchant at Salt Mines, The Priestess at Fortress, The Soldier at Machu Picchu",
                        "solution": "Where: Machu Picchu - Who: The Artisan and The Soldier - When: Time 5",
                        "score": [7, 13],
                        "locations": {
                            "SM": ["S", "5", "x3", "x2", "+", "x1", "A", "x1", "x1", "+", "+", "x3", "+", "x2", "x1", "x0", "+", "6", "S", "E", "6", "x2", "x0", "x0"],
                            "MP": ["+", "+", "x3", "x0", "+", "x0", "+", "x1", "x2", "+", "+", "x1", "S", "x0", "x0", "x1", "+", "5", "+", "A", "5", "x0", "x0", "x0"],
                            "CU": ["M", "4", "x0", "x1", "+", "x1", "E", "x1", "x1", "+", "5", "x2", "A", "x1", "x2", "x1", "2", "+", "E", "P", "3", "x1", "x0", "x1"],
                            "TE": ["+", "+", "x0", "x1", "+", "x1", "+", "x1", "x2", "5", "6", "x0", "F", "x0", "x1", "x1", "5", "+", "P", "M", "+", "x0", "x2", "x1"],
                            "OB": ["P", "3", "x0", "x0", "+", "x1", "P", "x1", "x0", "+", "4", "x0", "M", "x1", "x1", "x2", "3", "+", "+", "+", "+", "x1", "x1", "x2"],
                            "FO": ["F", "2", "x0", "x2", "+", "x2", "F", "x1", "x0", "2", "3", "x0", "P", "x2", "x1", "x1", "4", "+", "M", "+", "+", "x2", "x3", "x2"]
                        }
                    },
                    {
                        "title": "Investigation 3",
                        "level": "***",
                        "setup": "Paths) Cuzco X Salt Mines, Cuzco X Terraces, Observatory X Fortress; Time 1) The Artisan at Salt Mines, The Educator at Machu Picchu, The Farmer at Fortress, The Merchant at Observatory, The Priestess at Cuzco, The Soldier at Terraces",
                        "solution": "Where: Terraces - Who: The Merchant and The Soldier - When: Time 5",
                        "score": [8, 14],
                        "locations": {
                            "SM": ["+", "+", "x1", "x1", "+", "x1", "M", "x1", "x0", "+", "+", "x1", "+", "x0", "x0", "x0", "4", "6", "S", "+", "+", "x1", "x0", "x0"],
                            "MP": ["A", "5", "x0", "x1", "+", "x1", "P", "x1", "x1", "+", "4", "x2", "M", "x1", "x2", "x1", "3", "+", "A", "E", "2", "x1", "x0", "x1"],
                            "CU": ["M", "4", "x0", "x2", "+", "x1", "F", "x1", "x2", "6", "5", "x2", "P", "x3", "x3", "x2", "2", "+", "F", "P", "5", "x2", "x3", "x3"],
                            "TE": ["+", "+", "x3", "x0", "+", "x1", "+", "x1", "x2", "+", "+", "x0", "S", "x0", "x0", "x1", "5", "5", "+", "S", "+", "x0", "x0", "x0"],
                            "OB": ["P", "3", "x0", "x1", "+", "x1", "A", "x1", "x1", "5", "6", "x1", "E", "x1", "x1", "x1", "+", "+", "P", "F", "4", "x1", "x1", "x2"],
                            "FO": ["S", "+", "x2", "x1", "+", "x1", "S", "x1", "x0", "3", "+", "x0", "F", "x1", "x0", "x1", "6", "2", "M", "+", "+", "x1", "x2", "x0"]
                        }
                    },
                    {
                        "title": "Investigation 4",
                        "level": "****",
                        "setup": "Paths) Machu Picchu X Cuzco, Cuzco > Observatory, Cuzco X Terraces, Cuzco < Fortress, Terraces X Fortress; Time 1) The Artisan at Cuzco, The Educator at Fortress, The Farmer at Machu Picchu, The Merchant at Salt Mines, The Priestess at Observatory, The Soldier at Terraces",
                        "solution": "Where: Cuzco - Who: The Artisan and The Educator - When: Time 4",
                        "score": [7, 13],
                        "locations": {
                            "SM": ["F", "5", "x3", "x2", "+", "x3", "S", "x1", "x2", "6", "+", "x0", "M", "x2", "x1", "x1", "5", "6", "S", "M", "+", "x2", "x3", "x0"],
                            "MP": ["M", "6", "x0", "x2", "+", "x2", "+", "x1", "x0", "3", "+", "x0", "F", "x1", "x1", "x1", "2", "+", "E", "+", "+", "x0", "x2", "x0"],
                            "CU": ["+", "4", "x0", "x0", "+", "x0", "A", "x1", "x0", "+", "+", "x2", "+", "x0", "x1", "x0", "+", "+", "+", "+", "4", "x2", "x0", "x0"],
                            "TE": ["+", "+", "x3", "x0", "+", "x1", "M", "x1", "x2", "5", "+", "x0", "S", "x0", "x0", "x1", "4", "5", "+", "F", "+", "x1", "x1", "x0"],
                            "OB": ["E", "2", "x0", "x0", "+", "x0", "+", "x1", "x2", "+", "3", "x2", "P", "x2", "x1", "x1", "+", "+", "+", "A", "5", "x0", "x0", "x3"],
                            "FO": ["P", "3", "x0", "x2", "+", "x0", "P", "x1", "x0", "+", "4", "x2", "E", "x1", "x2", "x2", "+", "+", "A", "+", "6", "x1", "x0", "x3"]
                        }
                    },
                    {
                        "title": "Investigation 5",
                        "level": "****",
                        "setup": "Paths) Cuzco X Observatory, Cuzco X Salt Mines, Cuzco > Fortress, Salt Mines X Terraces, Terraces < Fortress; Time 1) The Artisan at Cuzco, The Educator at Machu Picchu, The Farmer at Terraces, The Merchant at Fortress, The Priestess at Observatory, The Soldier at Salt Mines",
                        "solution": "Where: Observatory - Who: The Merchant and The Priestess - When: Time 5",
                        "score": [9, 16],
                        "locations": {
                            "SM": ["E", "4", "x2", "x1", "+", "x0", "E", "x1", "x1", "+", "+", "x0", "+", "x1", "x3", "x0", "+", "5", "E", "S", "+", "x1", "x0", "x0"],
                            "MP": ["A", "5", "x3", "x2", "+", "x0", "S", "x1", "x1", "+", "+", "x2", "E", "x2", "x3", "x1", "+", "4", "S", "E", "6", "x1", "x0", "x0"],
                            "CU": ["F", "+", "x1", "x0", "+", "x1", "F", "x1", "x1", "2", "+", "x3", "S", "x1", "x0", "x3", "3", "3", "+", "A", "5", "x1", "x2", "x0"],
                            "TE": ["M", "+", "x0", "x1", "+", "x1", "A", "x1", "x0", "3", "+", "x1", "F", "x1", "x0", "x1", "2", "+", "F", "+", "4", "x1", "x3", "x0"],
                            "OB": ["+", "+", "x0", "x0", "+", "x1", "+", "x1", "x2", "+", "5", "x0", "P", "x0", "x0", "x1", "5", "+", "+", "M", "+", "x0", "x0", "x3"],
                            "FO": ["P", "+", "x0", "x2", "+", "x3", "M", "x1", "x1", "5", "4", "x0", "+", "x1", "x0", "x0", "6", "+", "M", "F", "+", "x2", "x1", "x3"]
                        }
                    }
                ]
            },
            {
                "title": "Scenario II - Amarinta's Curse",
                "description": "A member of the community has angered Amarinta, goddess of the hearth and prosperity. As punishment, Amarinta has inflicted a terrible curse that is passed on endlessly among the villagers. Finding the one who offended the goddess is the only way to break the spell and restore peace before it's too late... Amarinta's curse is passed from one Character to another. A Character remains under the curse until they meet one (or more) other Character(s). At that point, they are all cursed, but the original bearer is freed in the following Time. You know the cursed Character(s) in Time 6.",
                "mystery": "Go back in time to determine which Character was cursed by Amarinta in Time 1.",
                "clarifications": "In this scenario, you use all the Time tiles as well as all the Character tiles. You begin this scenario with the information from Time 6. The circled Character(s) are cursed. Characters must move at each Time and always to an adjacent Location. They therefore never remain in the same Location for two consecutive Time periods. For each investigation, some paths are blocked and therefore cannot be taken. Paths marked with an arrow are only accessible in the direction indicated (remember to note this information on your notes sheet!). All Characters are present in each Time period.",
                "investigations": [
                    {
                        "title": "Investigation 1",
                        "level": "****",
                        "setup": "Paths) Machu Picchu X Cuzco, Cuzco X Terraces, Terraces X Fortress; Time 6) The *CURSED* Artisan at Observatory, The Educator at Fortress, The Farmer at Salt Mines, The Merchant at Cuzco, The Priestess at Machu Picchu, The Soldier at Fortress",
                        "solution": "Who: ????",
                        "score": [9, 16],
                        "locations": {
                            "SM": ["E", "2", "x0", "x1", "M", "x2", "E", "x1", "x1", "2", "3", "x0", "P", "x2", "x2", "x2", "1", "+", "+", "P", "+", "x2", "x3", "x2"],
                            "MP": ["M", "1", "x0", "x1", "E", "x1", "P", "x2", "x0", "1", "4", "x0", "+", "x1", "x1", "x0", "2", "+", "+", "+", "+", "x1", "x1", "x2"],
                            "CU": ["P", "5", "x2", "x1", "A", "x2", "M", "x1", "x2", "+", "2", "x2", "A", "x1", "x1", "x2", "4", "5", "+", "E", "1", "x1", "x0", "x1"],
                            "TE": ["+", "3", "x0", "x0", "+", "x0", "+", "x0", "x1", "3", "+", "x0", "F", "x0", "x1", "x2", "+", "+", "+", "F", "+", "x0", "x2", "x0"],
                            "OB": ["+", "+", "x1", "x1", "S", "x0", "A", "x1", "x0", "+", "+", "x2", "+", "x0", "x0", "x0", "+", "1", "+", "+", "4", "x1", "x0", "x0"],
                            "FO": ["A", "+", "x3", "x2", "P", "x1", "S", "x1", "x2", "+", "1", "x2", "+", "x2", "x1", "x0", "5", "4", "+", "M", "2", "x1", "x0", "x1"]
                        }
                    },
                    {
                        "title": "Investigation 2",
                        "level": "****",
                        "setup": "Paths) Machu Picchu X Cuzco, Cuzco X Fortress; Time 6) The Artisan at Salt Mines, The Educator at Observatory, The Farmer at Cuzco, The Merchant at Cuzco, The Priestess at Cuzco, The *CURSED* Soldier at Machu Picchu",
                        "solution": "Who: ????",
                        "score": [9, 16],
                        "locations": {
                            "SM": ["P", "+", "x1", "x1", "F", "x1", "P", "x1", "x2", "1", "2", "x2", "+", "x1", "x0", "x0", "5", "5", "+", "S", "4", "x2", "x1", "x2"],
                            "MP": ["+", "+", "x1", "x1", "+", "x0", "+", "x0", "x0", "+", "3", "x0", "P", "x0", "x0", "x1", "+", "+", "+", "+", "+", "x0", "x0", "x1"],
                            "CU": ["F", "1", "x1", "x3", "E", "x2", "S", "x1", "x0", "2", "+", "x1", "M", "x2", "x1", "x1", "3", "4", "+", "+", "2", "x1", "x2", "x1"],
                            "TE": ["+", "+", "x1", "x0", "P", "x1", "M", "x1", "x2", "3", "5", "x2", "F", "x0", "x0", "x3", "4", "3", "+", "A", "5", "x1", "x1", "x2"],
                            "OB": ["E", "2", "x1", "x1", "A", "x1", "E", "x2", "x1", "5", "+", "x1", "+", "x2", "x3", "x0", "2", "1", "+", "F", "1", "x1", "x1", "x0"],
                            "FO": ["S", "3", "x1", "x0", "M", "x1", "F", "x1", "x1", "4", "+", "x0", "E", "x1", "x2", "x1", "1", "2", "+", "E", "+", "x1", "x1", "x0"]
                        }
                    },
                    {
                        "title": "Investigation 3",
                        "level": "****",
                        "setup": "Paths) Cuzco X Observatory, Cuzco X Salt Mines; Time 6) The Artisan at Fortress, The *CURSED* Educator at Observatory, The Farmer at Machu Picchu, The Merchant at Cuzco, The Priestess at Cuzco, The Soldier at Fortress",
                        "solution": "Who: ????",
                        "score": [7, 13],
                        "locations": {
                            "SM": ["+", "+", "x0", "x0", "M", "x1", "+", "x1", "x1", "3", "+", "x0", "F", "x0", "x0", "x1", "1", "+", "+", "F", "+", "x0", "x2", "x0"],
                            "MP": ["S", "3", "x2", "x1", "E", "x0", "F", "x1", "x0", "4", "+", "x0", "E", "x1", "x2", "x1", "+", "2", "+", "+", "+", "x2", "x2", "x0"],
                            "CU": ["E", "4", "x3", "x2", "S", "x2", "M", "x1", "x1", "+", "2", "x0", "S", "x2", "x2", "x1", "4", "3", "+", "S", "+", "x2", "x0", "x2"],
                            "TE": ["F", "+", "x0", "x0", "P", "x2", "+", "x1", "x1", "2", "1", "x0", "+", "x2", "x0", "x0", "5", "+", "+", "M", "+", "x0", "x1", "x1"],
                            "OB": ["+", "+", "x0", "x1", "A", "x0", "P", "x1", "x1", "+", "4", "x3", "A", "x0", "x1", "x1", "+", "+", "+", "A", "1", "x1", "x0", "x1"],
                            "FO": ["A", "5", "x1", "x2", "F", "x1", "A", "x1", "x2", "1", "5", "x3", "P", "x1", "x1", "x2", "3", "+", "+", "P", "4", "x1", "x1", "x2"]
                        }
                    },
                    {
                        "title": "Investigation 4",
                        "level": "*****",
                        "setup": "Paths) Cuzco X Salt Mines, Terraces X Fortress; Time 6) The *CURSED* Artisan at Fortress, The Educator at Cuzco, The Farmer at Salt Mines, The Merchant at Observatory, The Priestess at Salt Mines, The Soldier at Machu Picchu",
                        "solution": "Who: ????",
                        "score": [12, 21],
                        "locations": {
                            "SM": ["M", "1", "x1", "x2", "E", "x1", "+", "x1", "x1", "2", "+", "x0", "+", "x2", "x1", "x0", "2", "5", "+", "S", "+", "x0", "x2", "x1"],
                            "MP": ["+", "+", "x2", "x1", "F", "x1", "S", "x1", "x0", "1", "3", "x0", "P", "x0", "x0", "x3", "3", "4", "+", "+", "+", "x1", "x2", "x1"],
                            "CU": ["P", "3", "x1", "x1", "A", "x1", "P", "x1", "x0", "4", "2", "x2", "S", "x1", "x2", "x3", "4", "3", "+", "+", "1", "x3", "x1", "x2"],
                            "TE": ["E", "2", "x0", "x0", "M", "x1", "+", "x2", "x2", "5", "1", "x0", "+", "x1", "x1", "x0", "1", "+", "+", "P", "+", "x0", "x1", "x2"],
                            "OB": ["A", "4", "x1", "x1", "S", "x1", "E", "x1", "x1", "+", "+", "x2", "+", "x1", "x1", "x0", "+", "1", "+", "A", "5", "x1", "x0", "x0"],
                            "FO": ["S", "5", "x1", "x1", "+", "x1", "A", "x0", "x2", "+", "+", "x2", "+", "x1", "x1", "x0", "5", "2", "+", "E", "4", "x1", "x0", "x0"]
                        }
                    },
                    {
                        "title": "Investigation 5",
                        "level": "*****",
                        "setup": "Paths) Cuzco X Observatory, Cuzco X Fortress, Salt Mines X Terraces; Time 6) The Artisan at Fortress, The *CURSED* Educator at Salt Mines, The Farmer at Fortress, The *CURSED* Merchant at Machu Picchu, The *CURSED* Priestess at Cuzco, The Soldier at Terraces",
                        "solution": "Who: ????",
                        "score": [9, 16],
                        "locations": {
                            "SM": ["+", "+", "x2", "x1", "S", "x0", "P", "x1", "x0", "+", "4", "x0", "S", "x0", "x1", "x1", "+", "1", "+", "+", "+", "x1", "x0", "x1"],
                            "MP": ["M", "+", "x1", "x1", "A", "x2", "S", "x1", "x1", "+", "3", "x1", "P", "x1", "x0", "x1", "2", "4", "+", "P", "1", "x1", "x0", "x2"],
                            "CU": ["S", "5", "x2", "x1", "M", "x3", "A", "x1", "x3", "+", "2", "x2", "M", "x3", "x1", "x1", "5", "2", "+", "E", "2", "x1", "x0", "x2"],
                            "TE": ["E", "4", "x1", "x1", "P", "x1", "E", "x1", "x1", "3", "1", "x2", "A", "x1", "x2", "x2", "4", "+", "+", "A", "3", "x2", "x1", "x1"],
                            "OB": ["+", "+", "x0", "x0", "F", "x0", "+", "x1", "x1", "1", "+", "x0", "+", "x0", "x0", "x0", "+", "+", "+", "F", "+", "x0", "x2", "x0"],
                            "FO": ["F", "1", "x0", "x2", "E", "x0", "F", "x1", "x0", "4", "+", "x1", "E", "x1", "x2", "x1", "+", "+", "+", "+", "+", "x1", "x3", "x0"]
                        }
                    }
                ]
            },
            {
                "title": "Scenario III - The Ritual",
                "description": "Among the Incas, dance held a central place in religious rituals. These sacred dances were offered to the gods to honor their power and ask for protection, fertility, or prosperity. In this scenario, the Characters' movements are different: they move in circles, clockwise, on the outer roads of the map. Each Character moves according to an assigned dance. A dance is a sequence of 3 to 4 movements that repeat in a loop (e.g., 1-2-3-1-2-3).",
                "mystery": "To solve this investigation, find the position of each of the Characters in Time 6.",
                "clarifications": "When dancing, a Character doesn't necessarily move only one Location. They can also move 2, 3, or even 4 Locations in a single Time (e.g., a movement of 2 for a Character who is at Machu Picchu in Time 1 moves them to the Observatory in Time 2). Each dance doesn't necessarily begin with the first number of the combination (e.g., for a 1-2-3 dance, you don't know if the first movement is 1, 2, or 3). You know the starting position of the Characters in Time 1 and the 6 dances. It's up to you to find the dance associated with each Character. In the first two investigations, you know the dances of several Characters from the start. Note that in this scenario, you cannot use the Time 6 tile.",
                "investigations": [
                    {
                        "title": "Investigation 1",
                        "level": "*****",
                        "setup": "Paths) Machu Picchu > Cuzco > Observatory > Fortress > Terraces > Salt Mines > Machu Picchu; Time 1) The Artisan at Salt Mines, The Educator at Salt Mines, The Farmer at Machu Picchu, The Merchant at Terraces, The Priestess at Salt Mines, The Soldier at Observatory; Dances) The Artisan: 1>2>2, The Educator: 3>3>3, The Farmer: 1>1>3, Others: 1>1>1, 1>2>3, 2>2>2",
                        "solution": "The Artisan at ????, The Educator at ????, The Farmer at ????, The Merchant at ????, The Priestess at ????, The Soldier at ????",
                        "score": [9, 16],
                        "locations": {
                            "SM": ["M", "5", "x0", "?", "+", "x1", "F", "x3", "x1", "4", "4", "x1", "E", "x1", "x3", "x1", "2", "+", "+", "E", "+", "x2", "x1", "x2"],
                            "MP": ["+", "+", "x2", "?", "+", "x1", "+", "x1", "x2", "5", "+", "x1", "S", "x0", "x0", "x2", "3", "3", "+", "F", "5", "x0", "x2", "x0"],
                            "CU": ["F", "+", "x0", "?", "+", "x1", "M", "x0", "x0", "2", "+", "x2", "+", "x2", "x0", "x0", "4", "+", "+", "+", "2", "x1", "x1", "x0"],
                            "TE": ["S", "+", "x2", "?", "+", "x1", "A", "x1", "x1", "3", "+", "x1", "F", "x1", "x0", "x1", "+", "5", "+", "S", "4", "x1", "x1", "x0"],
                            "OB": ["E", "4", "x2", "?", "+", "x1", "E", "x1", "x2", "+", "5", "x1", "A", "x2", "x3", "x1", "5", "4", "+", "P", "3", "x2", "x0", "x2"],
                            "FO": ["+", "+", "x0", "?", "+", "x1", "+", "x0", "x0", "6", "3", "x0", "P", "x0", "x0", "x1", "6", "+", "+", "+", "+", "x0", "x1", "x2"]
                        }
                    },
                    {
                        "title": "Investigation 2",
                        "level": "*****",
                        "setup": "Paths) Machu Picchu > Cuzco > Observatory > Fortress > Terraces > Salt Mines > Machu Picchu; Time 1) The Artisan at Salt Mines, The Educator at Terraces, The Farmer at Fortress, The Merchant at Salt Mines, The Priestess at Salt Mines, The Soldier at Observatory; Dances) The Artisan: 2>2>3, The Educator: 1>3>3, Others: 1>1>2, 1>2>3, 2>2>2, 2>3>3",
                        "solution": "The Artisan at ????, The Educator at ????, The Farmer at ????, The Merchant at ????, The Priestess at ????, The Soldier at ????",
                        "score": [8, 14],
                        "locations": {
                            "SM": ["S", "4", "x1", "?", "+", "x2", "M", "x3", "x1", "5", "6", "x2", "+", "x2", "x1", "x0", "4", "2", "+", "F", "6", "x2", "x2", "x2"],
                            "MP": ["M", "+", "x0", "?", "+", "x2", "A", "x0", "x1", "+", "2", "x1", "+", "x2", "x0", "x0", "2", "+", "+", "M", "4", "x1", "x0", "x1"],
                            "CU": ["E", "2", "x1", "?", "+", "x0", "+", "x0", "x1", "3", "3", "x1", "P", "x2", "x1", "x2", "+", "5", "+", "S", "2", "x0", "x2", "x1"],
                            "TE": ["+", "+", "x2", "?", "+", "x0", "S", "x1", "x1", "+", "5", "x1", "A", "x0", "x1", "x1", "+", "4", "+", "P", "3", "x1", "x0", "x1"],
                            "OB": ["+", "3", "x2", "?", "+", "x2", "+", "x1", "x2", "+", "+", "x1", "M", "x0", "x2", "x3", "3", "3", "+", "A", "5", "x0", "x0", "x0"],
                            "FO": ["+", "6", "x0", "?", "+", "x0", "P", "x1", "x0", "4", "4", "x0", "+", "x0", "x1", "x0", "+", "+", "+", "+", "+", "x2", "x2", "x1"]
                        }
                    },
                    {
                        "title": "Investigation 3",
                        "level": "******",
                        "setup": "Paths) Machu Picchu > Cuzco > Observatory > Fortress > Terraces > Salt Mines > Machu Picchu; Time 1) The Artisan at Machu Picchu, The Educator at Machu Picchu, The Farmer at Salt Mines, The Merchant at Fortress, The Priestess at Salt Mines, The Soldier at Observatory; Dances) 1>1>3, 1>2>2, 1>2>3, 1>3>3, 2>2>2, 2>2>3",
                        "solution": "The Artisan at ????, The Educator at ????, The Farmer at ????, The Merchant at ????, The Priestess at ????, The Soldier at ????",
                        "score": [10, 18],
                        "locations": {
                            "SM": ["+", "+", "x1", "?", "+", "x0", "A", "x2", "x0", "3", "6", "x1", "F", "x0", "x0", "x1", "+", "6", "+", "+", "4", "x1", "x2", "x2"],
                            "MP": ["+", "4", "x1", "?", "+", "x2", "P", "x2", "x0", "4", "4", "x1", "M", "x0", "x2", "x2", "3", "3", "+", "+", "+", "x3", "x2", "x1"],
                            "CU": ["P", "+", "x1", "?", "+", "x0", "S", "x0", "x1", "+", "2", "x1", "+", "x1", "x0", "x0", "+", "4", "+", "A", "5", "x1", "x0", "x1"],
                            "TE": ["M", "3", "x0", "?", "+", "x2", "+", "x0", "x1", "+", "3", "x1", "P", "x1", "x2", "x3", "2", "+", "+", "M", "3", "x0", "x0", "x1"],
                            "OB": ["A", "2", "x2", "?", "+", "x0", "+", "x1", "x3", "2", "5", "x1", "+", "x3", "x2", "x0", "+", "5", "+", "E", "2", "x0", "x1", "x1"],
                            "FO": ["S", "+", "x1", "?", "+", "x2", "M", "x1", "x1", "5", "+", "x1", "+", "x1", "x0", "x0", "4", "2", "+", "F", "6", "x1", "x1", "x0"]
                        }
                    },
                    {
                        "title": "Investigation 4",
                        "level": "*******",
                        "setup": "Paths) Machu Picchu > Cuzco > Observatory > Fortress > Terraces > Salt Mines > Machu Picchu; Time 1) The Artisan at Terraces, The Educator at Machu Picchu, The Farmer at Observatory, The Merchant at Cuzco, The Priestess at Machu Picchu, The Soldier at Observatory; Dances) 1>3>3, 2>2>3, 2>3>3, 1>1>1>3, 1>1>2>2, 1>1>3>3",
                        "solution": "The Artisan at ????, The Educator at ????, The Farmer at ????, The Merchant at ????, The Priestess at ????, The Soldier at ????",
                        "score": [12, 21],
                        "locations": {
                            "SM": ["A", "4", "x1", "?", "+", "x1", "E", "x0", "x1", "2", "6", "x2", "+", "x3", "x1", "x0", "5", "2", "+", "M", "2", "x1", "x1", "x1"],
                            "MP": ["+", "5", "x0", "?", "+", "x1", "+", "x2", "x2", "5", "3", "x1", "A", "x0", "x2", "x3", "3", "+", "+", "F", "3", "x0", "x1", "x2"],
                            "CU": ["E", "2", "x1", "?", "+", "x2", "P", "x1", "x1", "+", "4", "x0", "+", "x1", "x2", "x0", "6", "5", "+", "S", "+", "x1", "x0", "x1"],
                            "TE": ["M", "3", "x2", "?", "+", "x1", "S", "x1", "x1", "+", "+", "x2", "E", "x1", "x1", "x1", "2", "4", "+", "A", "5", "x1", "x0", "x0"],
                            "OB": ["+", "+", "x2", "?", "+", "x1", "A", "x2", "x1", "3", "5", "x1", "F", "x0", "x0", "x2", "4", "3", "+", "P", "4", "x2", "x2", "x1"],
                            "FO": ["P", "+", "x0", "?", "+", "x0", "F", "x0", "x0", "4", "2", "x0", "+", "x1", "x0", "x0", "+", "+", "+", "+", "+", "x1", "x2", "x1"]
                        }
                    },
                    {
                        "title": "Investigation 5",
                        "level": "*******",
                        "setup": "Paths) Machu Picchu > Cuzco > Observatory > Fortress > Terraces > Salt Mines > Machu Picchu; Time 1) The Artisan at Machu Picchu, The Educator at Machu Picchu, The Farmer at Machu Picchu, The Merchant at Observatory, The Priestess at Cuzco, The Soldier at Cuzco; Dances) 1>1>1, 1>2>3, 2>2>2, 1>1>1>3, 1>2>3>3, 2>2>2>3",
                        "solution": "The Artisan at ????, The Educator at ????, The Farmer at ????, The Merchant at ????, The Priestess at ????, The Soldier at ????",
                        "score": [10, 18],
                        "locations": {
                            "SM": ["M", "6", "x0", "?", "+", "x2", "+", "x0", "x1", "+", "3", "x0", "P", "x1", "x1", "x1", "2", "+", "+", "M", "+", "x0", "x0", "x2"],
                            "MP": ["+", "+", "x2", "?", "+", "x0", "+", "x3", "x1", "3", "+", "x2", "S", "x0", "x1", "x2", "+", "3", "+", "A", "5", "x0", "x3", "x0"],
                            "CU": ["A", "2", "x2", "?", "+", "x1", "S", "x2", "x0", "4", "4", "x2", "M", "x2", "x1", "x1", "3", "4", "+", "+", "2", "x3", "x1", "x2"],
                            "TE": ["+", "5", "x0", "?", "+", "x0", "+", "x0", "x1", "+", "+", "x0", "+", "x0", "x1", "x0", "+", "+", "+", "E", "+", "x0", "x0", "x0"],
                            "OB": ["+", "3", "x0", "?", "+", "x2", "+", "x1", "x0", "+", "+", "x1", "A", "x0", "x1", "x2", "6", "+", "+", "+", "3", "x0", "x0", "x0"],
                            "FO": ["S", "4", "x2", "?", "+", "x1", "M", "x0", "x3", "2", "2", "x1", "+", "x3", "x1", "x0", "4", "5", "+", "F", "4", "x3", "x2", "x2"]
                        }
                    }
                ]
            }
        ];

        const timePlacards = {
            1: [7, 4],
            2: [13, 0],
            3: [15, 12],
            4: [21, 6],
            5: [8, 19],
            6: [3, 18]
        };

        const characterPlacards = {
            "A": [11, 20],
            "E": [14, 1],
            "F": [22, 9],
            "M": [5, 16],
            "P": [23, 10],
            "S": [2, 17]
        };

        // Game state
        let currentScenario = null;
        let currentInvestigation = null;
        let score = 0;
        let investigationHistory = [];
        let historyVisible = true;

        // DOM elements
        const scenarioSelection = document.getElementById("scenario-selection");
        const scenarioDescription = document.getElementById(
            "scenario-description"
        );
        const investigationArea = document.getElementById("investigation-area");
        const investigationName = document.getElementById("investigation-name");
        const endInvestigationScreen = document.getElementById(
            "end-investigation-screen"
        );
        const historyEntries = document.getElementById("history-entries");
        const toggleHistoryButton = document.getElementById("toggle-history");

        // Initialize the game
        function initGame() {
            createScenarioButtons();

            // Event listeners
            document
                .getElementById("back-to-scenarios")
                .addEventListener("click", showScenarioSelection);
            document
                .getElementById("back-to-investigations")
                .addEventListener("click", showInvestigationSelection);
            document
                .getElementById("back-to-scenarios-end")
                .addEventListener("click", showScenarioSelection);
            document
                .getElementById("end-investigation")
                .addEventListener("click", endInvestigation);
            document
                .getElementById("new-investigation")
                .addEventListener("click", showInvestigationSelection);
            document
                .getElementById("investigation-type")
                .addEventListener("change", toggleInvestigationType);
            document
                .getElementById("submit-investigation")
                .addEventListener("click", submitInvestigation);
            toggleHistoryButton.addEventListener("click", toggleHistory);
        }

        function createScenarioButtons() {
            const buttonsContainer = document.getElementById("scenario-buttons");
            buttonsContainer.innerHTML = "";

            const buttons = scenarios.map((scenario, index) => {
                const button = document.createElement("button");
                button.className = "btn";
                button.textContent = scenario.title;
                button.addEventListener("click", () => selectScenario(index));
                buttonsContainer.appendChild(button);
                return button;
            });

            requestAnimationFrame(() => {
                let maxWidth = 0;
                let maxHeight = 0;

                buttons.forEach((btn) => {
                    const { offsetWidth, offsetHeight } = btn;
                    if (offsetWidth > maxWidth) maxWidth = offsetWidth;
                    if (offsetHeight > maxHeight) maxHeight = offsetHeight;
                });

                buttons.forEach((btn) => {
                    btn.style.width = `${maxWidth + 40}px`;
                    btn.style.height = `${maxHeight + 20}px`;
                });
            });
        }

        function selectScenario(index) {
            currentScenario = scenarios[index];

            document.getElementById("scenario-title").textContent =
                currentScenario.title;
            document.getElementById("scenario-desc").textContent =
                currentScenario.description;
            document.getElementById("scenario-mystery").textContent =
                currentScenario.mystery;
            document.getElementById("scenario-clarifications").textContent =
                currentScenario.clarifications;

            const buttonsContainer = document.getElementById(
                "investigation-buttons"
            );
            buttonsContainer.innerHTML = "";

            const buttons = currentScenario.investigations.map(
                (investigation, idx) => {
                    const button = document.createElement("button");
                    button.className = "btn";
                    button.textContent = `${investigation.title} (${investigation.level})`;
                    button.addEventListener("click", () => selectInvestigation(idx));
                    buttonsContainer.appendChild(button);
                    return button;
                }
            );

            requestAnimationFrame(() => {
                let maxWidth = 0;
                let maxHeight = 0;

                buttons.forEach((btn) => {
                    const { offsetWidth, offsetHeight } = btn;
                    if (offsetWidth > maxWidth) maxWidth = offsetWidth;
                    if (offsetHeight > maxHeight) maxHeight = offsetHeight;
                });

                buttons.forEach((btn) => {
                    btn.style.width = `${maxWidth + 20}px`;
                    btn.style.height = `${maxHeight + 10}px`;
                });
            });

            scenarioSelection.classList.add("hidden");
            scenarioDescription.classList.remove("hidden");
        }

        // Select an investigation
        function selectInvestigation(index) {
            currentInvestigation = currentScenario.investigations[index];
            score = 0;
            investigationHistory = [];
            updateHistoryDisplay();

            // Update UI
            document.getElementById(
                "investigation-title"
            ).textContent = `${currentScenario.title} | ${currentInvestigation.title}`;
            document.getElementById("investigation-goal").textContent =
                currentScenario.mystery;
            document.getElementById(
                "investigation-setup"
            ).textContent = `Starting information: ${currentInvestigation.setup}`;
            document.getElementById("score").textContent = score;

            // Reset investigation result
            document.getElementById("investigation-result").classList.add("hidden");

            // Show investigation area
            scenarioDescription.classList.add("hidden");
            investigationArea.classList.remove("hidden");
        }

        // Show scenario selection
        function showScenarioSelection() {
            scenarioDescription.classList.add("hidden");
            investigationArea.classList.add("hidden");
            endInvestigationScreen.classList.add("hidden");
            scenarioSelection.classList.remove("hidden");
        }

        // Show investigation selection
        function showInvestigationSelection() {
            investigationArea.classList.add("hidden");
            endInvestigationScreen.classList.add("hidden");
            scenarioDescription.classList.remove("hidden");
        }

        // Toggle investigation type
        function toggleInvestigationType() {
            const investigationType =
                document.getElementById("investigation-type").value;
            document
                .getElementById("time-investigation")
                .classList.toggle("hidden", investigationType !== "time");
            document
                .getElementById("character-investigation")
                .classList.toggle("hidden", investigationType !== "character");
        }

        // Submit an investigation
        function submitInvestigation() {
            const investigationType =
                document.getElementById("investigation-type").value;
            let placard, location, investigationText, resultText;

            if (investigationType === "time") {
                const time = document.getElementById("time-select").value;
                const locationCode = document.getElementById("time-location").value;
                placard = timePlacards[parseInt(time)];
                location = currentInvestigation.locations[locationCode];
                investigationText = `${getLocationName(
                    locationCode
                )} at Time ${time}`;
            } else {
                const character = document.getElementById("character-select").value;
                const locationCode =
                    document.getElementById("character-location").value;
                placard = characterPlacards[character];
                location = currentInvestigation.locations[locationCode];
                investigationText = `${getCharacterName(
                    character
                )} at ${getLocationName(locationCode)}`;
            }
            investigationName.textContent = investigationText;

            // Get results
            const sharedInfo = location[placard[0]];
            const privateInfo =
                location[placard[1]] !== "+" ? location[placard[1]] : "go again";

            // Update UI with results
            document.getElementById(
                "shared-info"
            ).textContent = `Shared information: ${sharedInfo}`;
            document.getElementById(
                "private-info"
            ).textContent = `Private information: ${privateInfo}`;
            document
                .getElementById("investigation-result")
                .classList.remove("hidden");

            // Add to history
            resultText = `Shared: ${sharedInfo}, Private: ${privateInfo}`;
            investigationHistory.unshift({
                investigation: investigationText,
                result: resultText,
            });
            updateHistoryDisplay();

            // Update score
            score++;
            document.getElementById("score").textContent = score;
        }

        // Toggle history visibility
        function toggleHistory() {
            historyVisible = !historyVisible;
            historyEntries.style.display = historyVisible ? "block" : "none";
            toggleHistoryButton.textContent = historyVisible ? "Hide" : "Show";
        }

        // Update history display
        function updateHistoryDisplay() {
            historyEntries.innerHTML = "";

            if (investigationHistory.length === 0) {
                historyEntries.innerHTML =
                    "<p>No questions yet. Ask a question to see history.</p>";
                return;
            }

            investigationHistory.forEach((entry) => {
                const entryElement = document.createElement("div");
                entryElement.className = "history-entry";
                entryElement.innerHTML = `
                    <div class="history-investigation">${entry.investigation}</div>
                    <div class="history-result">${entry.result}</div>
                `;
                historyEntries.appendChild(entryElement);
            });
        }

        // Helper functions to get character and location names
        function getCharacterName(code) {
            const names = {
                A: "The Artisan",
                E: "The Educator",
                F: "The Farmer",
                M: "The Merchant",
                P: "The Priestess",
                S: "The Soldier",
            };
            return names[code];
        }

        function getLocationName(code) {
            const names = {
                SM: "Salt Mines",
                MP: "Machu Picchu",
                CU: "Cuzco",
                TE: "Terraces",
                OB: "Observatory",
                FO: "Fortress",
            };
            return names[code];
        }

        // End investigation
        function endInvestigation() {
            investigationArea.classList.add("hidden");
            endInvestigationScreen.classList.remove("hidden");

            document.getElementById("solution-text").textContent =
                currentInvestigation.solution;

            let rank;
            if (score <= currentInvestigation.score[0]) {
                rank = "Gold";
            } else if (score <= currentInvestigation.score[1]) {
                rank = "Silver";
            } else {
                rank = "Bronze";
            }

            document.getElementById(
                "rank-display"
            ).textContent = `If you played solo, with ${score} question(s) your rank is ${rank} Magnifying Glass.`;
        }

        // Initialize the game when the page loads
        window.addEventListener("DOMContentLoaded", initGame);
    </script>
</body>

</html>
